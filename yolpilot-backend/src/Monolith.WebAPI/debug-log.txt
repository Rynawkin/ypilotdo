C:\Users\QP\Desktop\monolith-master2\src\Monolith.WebAPI\Properties\launchSettings.json içindeki başlatma ayarları kullanılıyor...
Derleniyor...
info: Hangfire.SqlServer.SqlServerObjectsInstaller[0]
      Start installing Hangfire SQL objects...
info: Hangfire.SqlServer.SqlServerObjectsInstaller[0]
      Hangfire SQL objects installed.
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver[1]
      Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
warn: LuckyPennySoftware.MediatR.License[0]
      You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [MigrationId], [ProductVersion]
      FROM [__EFMigrationsHistory]
      ORDER BY [MigrationId];
info: Microsoft.EntityFrameworkCore.Migrations[20405]
      No migrations were applied. The database is already up to date.
info: Program[0]
      Database migrated successfully.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
      FROM [AspNetRoles] AS [a]
      WHERE [a].[NormalizedName] = @__normalizedName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
      FROM [AspNetRoles] AS [a]
      WHERE [a].[NormalizedName] = @__normalizedName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
      FROM [AspNetRoles] AS [a]
      WHERE [a].[NormalizedName] = @__normalizedName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
      FROM [AspNetRoles] AS [a]
      WHERE [a].[NormalizedName] = @__normalizedName_0
info: Program[0]
      Roles seeded successfully.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [w].[Id], [w].[Active], [w].[CostPerHour], [w].[CostPerKm], [w].[CreatedAt], [w].[Currency], [w].[DefaultServiceTime], [w].[DistanceUnit], [w].[Email], [w].[IsDeleted], [w].[Language], [w].[MaximumDriverCount], [w].[Name], [w].[PhoneNumber], [w].[TimeZone], [w].[UpdatedAt]
      FROM [Workspaces] AS [w]
      WHERE [w].[Name] IN (N'Demo Company', N'RotaApp SaaS')
Demo workspaces already exist, skipping seed...
info: Program[0]
      Demo users and workspace seeded successfully.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [d].[Id], [d].[Avatar], [d].[CreatedAt], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted], [d].[LicenseNumber], [d].[Name], [d].[Phone], [d].[Rating], [d].[Status], [d].[TotalDeliveries], [d].[UpdatedAt], [d].[UserId], [d].[VehicleId], [d].[WorkspaceId], [w].[Id], [w].[Active], [w].[CostPerHour], [w].[CostPerKm], [w].[CreatedAt], [w].[Currency], [w].[DefaultServiceTime], [w].[DistanceUnit], [w].[Email], [w].[IsDeleted], [w].[Language], [w].[MaximumDriverCount], [w].[Name], [w].[PhoneNumber], [w].[TimeZone], [w].[UpdatedAt]
      FROM [Drivers] AS [d]
      INNER JOIN [Workspaces] AS [w] ON [d].[WorkspaceId] = [w].[Id]
      WHERE [d].[UserId] IS NULL
info: Program[0]
      No drivers found to migrate.
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5055
info: Hangfire.BackgroundJobServer[0]
      Starting Hangfire Server using job storage: 'SQL Server: localhost,1433@RotaAppDB'
info: Hangfire.BackgroundJobServer[0]
      Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
info: Hangfire.BackgroundJobServer[0]
      Using the following options for Hangfire Server:
          Worker count: 20
          Listening queues: 'default'
          Shutdown timeout: 00:00:15
          Schedule polling interval: 00:00:15
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: C:\Users\QP\Desktop\monolith-master2\src\Monolith.WebAPI
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 successfully announced in 8,071 ms
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 all the dispatchers started
warn: Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware[3]
      Failed to determine the https port for redirect.
SignalR Token received for path: /hubs/tracking
JWT Token validated for: Firma Yöneticisi
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[5]
      OnConnectedAsync started.
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver[2]
      Found protocol implementation for requested protocol: json.
dbug: Microsoft.AspNetCore.SignalR.HubConnectionContext[1]
      Completed connection handshake. Using HubProtocol 'json'.
info: Monolith.WebAPI.Hubs.TrackingHub[0]
      User 1cccb212-17e9-4696-a369-3f2360d7ad7c connected to tracking for workspace 1
SignalR Token received for path: /hubs/journey
JWT Token validated for: Firma Yöneticisi
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[5]
      OnConnectedAsync started.
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver[2]
      Found protocol implementation for requested protocol: json.
dbug: Microsoft.AspNetCore.SignalR.HubConnectionContext[1]
      Completed connection handshake. Using HubProtocol 'json'.
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      User 1cccb212-17e9-4696-a369-3f2360d7ad7c connected to workspace 1
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [w].[Active]
      FROM [Workspaces] AS [w]
      WHERE [w].[Id] = @__workspaceId_0
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneysSummaryQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneysSummaryQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneysSummaryQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AssignedVehicleId], [a].[ConcurrencyStamp], [a].[CurrentLatitude], [a].[CurrentLongitude], [a].[DepotId], [a].[DriverStatus], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsAdmin], [a].[IsDispatcher], [a].[IsDriver], [a].[IsOnboarded], [a].[IsSuperAdmin], [a].[LicenseNumber], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Rating], [a].[SecurityStamp], [a].[TotalDeliveries], [a].[TwoFactorEnabled], [a].[UserData], [a].[UserName], [a].[WorkspaceId], [w].[Id], [w].[Active], [w].[CostPerHour], [w].[CostPerKm], [w].[CreatedAt], [w].[Currency], [w].[DefaultServiceTime], [w].[DistanceUnit], [w].[Email], [w].[IsDeleted], [w].[Language], [w].[MaximumDriverCount], [w].[Name], [w].[PhoneNumber], [w].[TimeZone], [w].[UpdatedAt], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId]
      FROM [AspNetUsers] AS [a]
      INNER JOIN [Workspaces] AS [w] ON [a].[WorkspaceId] = [w].[Id]
      LEFT JOIN [Depots] AS [d] ON [a].[DepotId] = [d].[Id]
      WHERE [a].[Id] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__User_WorkspaceId_0='?' (DbType = Int32), @__fromDate_1='?' (DbType = DateTime2), @__toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SELECT [j].[Id], [j].[RouteId], [r].[Name], [j].[CreatedAt], CONVERT(varchar(11), [d].[Id]), [d].[Name], CASE
          WHEN [v].[Id] IS NOT NULL THEN CONVERT(varchar(11), [v].[Id])
          ELSE NULL
      END, CASE
          WHEN [v].[Id] IS NOT NULL THEN [v].[PlateNumber]
          ELSE N'Atanmadı'
      END, (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j0]
          WHERE [j].[Id] = [j0].[JourneyId]), (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j1]
          WHERE [j].[Id] = [j1].[JourneyId] AND [j1].[Status] = 2), COALESCE([r].[TotalDistance], 0.0E0), COALESCE([r].[TotalDuration], 0), [j].[StartedAt], [j].[CompletedAt], [j].[CancelledAt], [j].[FinishedAt], [j].[ArchivedAt], CASE
          WHEN [d].[CurrentLatitude] IS NOT NULL AND [d].[CurrentLongitude] IS NOT NULL THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END, [d].[CurrentLatitude], [d].[CurrentLongitude]
      FROM [Journeys] AS [j]
      INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
      INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      WHERE [r].[WorkspaceId] = @__User_WorkspaceId_0 AND [j].[CreatedAt] >= @__fromDate_1 AND [j].[CreatedAt] <= @__toDate_2
      ORDER BY [j].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneysSummaryQuery response handled
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      User disconnected: j1qBcpGzEzWBkhwnNxgFtg
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[6]
      OnConnectedAsync ending.
info: Monolith.WebAPI.Hubs.TrackingHub[0]
      User disconnected: kGGHxY_eYA8koe4HLPH8uA
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[6]
      OnConnectedAsync ending.
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneysSummaryQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneysSummaryQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneysSummaryQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__User_WorkspaceId_0='?' (DbType = Int32), @__fromDate_1='?' (DbType = DateTime2), @__toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SELECT [j].[Id], [j].[RouteId], [r].[Name], [j].[CreatedAt], CONVERT(varchar(11), [d].[Id]), [d].[Name], CASE
          WHEN [v].[Id] IS NOT NULL THEN CONVERT(varchar(11), [v].[Id])
          ELSE NULL
      END, CASE
          WHEN [v].[Id] IS NOT NULL THEN [v].[PlateNumber]
          ELSE N'Atanmadı'
      END, (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j0]
          WHERE [j].[Id] = [j0].[JourneyId]), (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j1]
          WHERE [j].[Id] = [j1].[JourneyId] AND [j1].[Status] = 2), COALESCE([r].[TotalDistance], 0.0E0), COALESCE([r].[TotalDuration], 0), [j].[StartedAt], [j].[CompletedAt], [j].[CancelledAt], [j].[FinishedAt], [j].[ArchivedAt], CASE
          WHEN [d].[CurrentLatitude] IS NOT NULL AND [d].[CurrentLongitude] IS NOT NULL THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END, [d].[CurrentLatitude], [d].[CurrentLongitude]
      FROM [Journeys] AS [j]
      INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
      INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      WHERE [r].[WorkspaceId] = @__User_WorkspaceId_0 AND [j].[CreatedAt] >= @__fromDate_1 AND [j].[CreatedAt] <= @__toDate_2
      ORDER BY [j].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneysSummaryQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneysSummaryQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneysSummaryQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneysSummaryQuery
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__User_WorkspaceId_0='?' (DbType = Int32), @__fromDate_1='?' (DbType = DateTime2), @__toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SELECT [j].[Id], [j].[RouteId], [r].[Name], [j].[CreatedAt], CONVERT(varchar(11), [d].[Id]), [d].[Name], CASE
          WHEN [v].[Id] IS NOT NULL THEN CONVERT(varchar(11), [v].[Id])
          ELSE NULL
      END, CASE
          WHEN [v].[Id] IS NOT NULL THEN [v].[PlateNumber]
          ELSE N'Atanmadı'
      END, (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j0]
          WHERE [j].[Id] = [j0].[JourneyId]), (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j1]
          WHERE [j].[Id] = [j1].[JourneyId] AND [j1].[Status] = 2), COALESCE([r].[TotalDistance], 0.0E0), COALESCE([r].[TotalDuration], 0), [j].[StartedAt], [j].[CompletedAt], [j].[CancelledAt], [j].[FinishedAt], [j].[ArchivedAt], CASE
          WHEN [d].[CurrentLatitude] IS NOT NULL AND [d].[CurrentLongitude] IS NOT NULL THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END, [d].[CurrentLatitude], [d].[CurrentLongitude]
      FROM [Journeys] AS [j]
      INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
      INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      WHERE [r].[WorkspaceId] = @__User_WorkspaceId_0 AND [j].[CreatedAt] >= @__fromDate_1 AND [j].[CreatedAt] <= @__toDate_2
      ORDER BY [j].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneysSummaryQuery response handled
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetRoutesQuery (GetRoutesQuery { WorkspaceId = 1 })
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetRoutesQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId], [d0].[Id], [d0].[Avatar], [d0].[CreatedAt], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email], [d0].[IsDeleted], [d0].[LicenseNumber], [d0].[Name], [d0].[Phone], [d0].[Rating], [d0].[Status], [d0].[TotalDeliveries], [d0].[UpdatedAt], [d0].[UserId], [d0].[VehicleId], [d0].[WorkspaceId], [v].[Id], [v].[Brand], [v].[Capacity], [v].[CreatedAt], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted], [v].[Model], [v].[PlateNumber], [v].[Status], [v].[Type], [v].[UpdatedAt], [v].[WorkspaceId], [v].[Year], [r0].[Id], [r1].[Id], [r0].[Address], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[RouteId], [r0].[StartTime], [r1].[Address], [r1].[Latitude], [r1].[Longitude], [r1].[Name], [r1].[RouteId]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [r].[Id], [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      INNER JOIN [RouteStops] AS [r2] ON [r].[Id] = [r2].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__request_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetRoutesQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetRoutesQuery (GetRoutesQuery { WorkspaceId = 1 })
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetRoutesQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId], [d0].[Id], [d0].[Avatar], [d0].[CreatedAt], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email], [d0].[IsDeleted], [d0].[LicenseNumber], [d0].[Name], [d0].[Phone], [d0].[Rating], [d0].[Status], [d0].[TotalDeliveries], [d0].[UpdatedAt], [d0].[UserId], [d0].[VehicleId], [d0].[WorkspaceId], [v].[Id], [v].[Brand], [v].[Capacity], [v].[CreatedAt], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted], [v].[Model], [v].[PlateNumber], [v].[Status], [v].[Type], [v].[UpdatedAt], [v].[WorkspaceId], [v].[Year], [r0].[Id], [r1].[Id], [r0].[Address], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[RouteId], [r0].[StartTime], [r1].[Address], [r1].[Latitude], [r1].[Longitude], [r1].[Name], [r1].[RouteId]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [r].[Id], [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      INNER JOIN [RouteStops] AS [r2] ON [r].[Id] = [r2].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetCustomersQuery (Monolith.WebAPI.Applications.Queries.Customers.GetCustomersQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetCustomersQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__request_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetRoutesQuery response handled
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__User_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_1) [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__User_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
      ORDER BY COALESCE([c].[UpdatedAt], [c].[CreatedAt]) DESC, [c].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetCustomersQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetCustomersQuery (Monolith.WebAPI.Applications.Queries.Customers.GetCustomersQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetCustomersQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__User_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_1) [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__User_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
      ORDER BY COALESCE([c].[UpdatedAt], [c].[CreatedAt]) DESC, [c].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetCustomersQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetRouteQuery (GetRouteQuery { WorkspaceId = 1, RouteId = 2092 })
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetRouteQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32), @__request_RouteId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId], [d0].[Id], [d0].[Avatar], [d0].[CreatedAt], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email], [d0].[IsDeleted], [d0].[LicenseNumber], [d0].[Name], [d0].[Phone], [d0].[Rating], [d0].[Status], [d0].[TotalDeliveries], [d0].[UpdatedAt], [d0].[UserId], [d0].[VehicleId], [d0].[WorkspaceId], [v].[Id], [v].[Brand], [v].[Capacity], [v].[CreatedAt], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted], [v].[Model], [v].[PlateNumber], [v].[Status], [v].[Type], [v].[UpdatedAt], [v].[WorkspaceId], [v].[Year], [r0].[Id], [r1].[Id], [r0].[Address], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[RouteId], [r0].[StartTime], [r1].[Address], [r1].[Latitude], [r1].[Longitude], [r1].[Name], [r1].[RouteId]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[Id] = @__request_RouteId_1 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Id], [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32), @__request_RouteId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t0].[Id], [t0].[Address], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt], [t0].[CustomerId], [t0].[IsDeleted], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address0], [t0].[Code], [t0].[CreatedAt0], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted0], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt0], [t0].[WorkspaceId], [t].[Id], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id4]
      FROM (
          SELECT TOP(1) [r].[Id], [d].[Id] AS [Id0], [d0].[Id] AS [Id1], [v].[Id] AS [Id2], [r0].[Id] AS [Id3], [r1].[Id] AS [Id4]
          FROM [Routes] AS [r]
          INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[Id] = @__request_RouteId_1 AND [r].[IsDeleted] = CAST(0 AS bit)
      ) AS [t]
      INNER JOIN (
          SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [c].[Id] AS [Id0], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt0], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted0], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt0], [c].[WorkspaceId]
          FROM [RouteStops] AS [r2]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[RouteId]
      ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id4]
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetRouteQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command AssignRouteCommand (Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommand)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command AssignRouteCommand
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_RouteId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[CompletedAt], [t].[CompletedDeliveries], [t].[CreatedAt], [t].[Date], [t].[DepotId], [t].[DriverId], [t].[IsDeleted], [t].[Name], [t].[Notes], [t].[Optimized], [t].[StartedAt], [t].[Status], [t].[TotalDeliveries], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[Id0], [t].[Active], [t].[CostPerHour], [t].[CostPerKm], [t].[CreatedAt0], [t].[Currency], [t].[DefaultServiceTime], [t].[DistanceUnit], [t].[Email], [t].[IsDeleted0], [t].[Language], [t].[MaximumDriverCount], [t].[Name0], [t].[PhoneNumber], [t].[TimeZone], [t].[UpdatedAt0], [t].[Id1], [t].[Address], [t].[CreatedAt1], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted1], [t].[Latitude], [t].[Longitude], [t].[Name1], [t].[StartWorkingHours], [t].[UpdatedAt1], [t].[WorkingHoursJson], [t].[WorkspaceId0], [t].[Id2], [t].[Address0], [t].[Latitude0], [t].[Longitude0], [t].[Name2], [t].[RouteId], [t].[StartTime], [t].[Id3], [t].[Address1], [t].[Latitude1], [t].[Longitude1], [t].[Name3], [t].[RouteId0], [t].[Id4], [t].[Id5], [t0].[Id], [t0].[Address], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt], [t0].[CustomerId], [t0].[IsDeleted], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address0], [t0].[Code], [t0].[CreatedAt0], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted0], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt0], [t0].[WorkspaceId], [t].[Avatar], [t].[CreatedAt2], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email0], [t].[IsDeleted2], [t].[LicenseNumber], [t].[Name4], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries0], [t].[UpdatedAt2], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId1], [t].[Brand], [t].[Capacity], [t].[CreatedAt3], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted3], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt3], [t].[WorkspaceId2], [t].[Year]
      FROM (
          SELECT TOP(1) [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [w].[Id] AS [Id0], [w].[Active], [w].[CostPerHour], [w].[CostPerKm], [w].[CreatedAt] AS [CreatedAt0], [w].[Currency], [w].[DefaultServiceTime], [w].[DistanceUnit], [w].[Email], [w].[IsDeleted] AS [IsDeleted0], [w].[Language], [w].[MaximumDriverCount], [w].[Name] AS [Name0], [w].[PhoneNumber], [w].[TimeZone], [w].[UpdatedAt] AS [UpdatedAt0], [d].[Id] AS [Id1], [d].[Address], [d].[CreatedAt] AS [CreatedAt1], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted] AS [IsDeleted1], [d].[Latitude], [d].[Longitude], [d].[Name] AS [Name1], [d].[StartWorkingHours], [d].[UpdatedAt] AS [UpdatedAt1], [d].[WorkingHoursJson], [d].[WorkspaceId] AS [WorkspaceId0], [r0].[Id] AS [Id2], [r0].[Address] AS [Address0], [r0].[Latitude] AS [Latitude0], [r0].[Longitude] AS [Longitude0], [r0].[Name] AS [Name2], [r0].[RouteId], [r0].[StartTime], [r1].[Id] AS [Id3], [r1].[Address] AS [Address1], [r1].[Latitude] AS [Latitude1], [r1].[Longitude] AS [Longitude1], [r1].[Name] AS [Name3], [r1].[RouteId] AS [RouteId0], [d0].[Id] AS [Id4], [d0].[Avatar], [d0].[CreatedAt] AS [CreatedAt2], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted2], [d0].[LicenseNumber], [d0].[Name] AS [Name4], [d0].[Phone], [d0].[Rating], [d0].[Status] AS [Status0], [d0].[TotalDeliveries] AS [TotalDeliveries0], [d0].[UpdatedAt] AS [UpdatedAt2], [d0].[UserId], [d0].[VehicleId] AS [VehicleId0], [d0].[WorkspaceId] AS [WorkspaceId1], [v].[Id] AS [Id5], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt3], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted3], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt3], [v].[WorkspaceId] AS [WorkspaceId2], [v].[Year]
          FROM [Routes] AS [r]
          INNER JOIN [Workspaces] AS [w] ON [r].[WorkspaceId] = [w].[Id]
          INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
          WHERE [r].[Id] = @__request_RouteId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [c].[Id] AS [Id0], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt0], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted0], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt0], [c].[WorkspaceId]
          FROM [RouteStops] AS [r2]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[RouteId]
      ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id4], [t].[Id5], [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_DriverId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [d].[Id], [d].[Avatar], [d].[CreatedAt], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted], [d].[LicenseNumber], [d].[Name], [d].[Phone], [d].[Rating], [d].[Status], [d].[TotalDeliveries], [d].[UpdatedAt], [d].[UserId], [d].[VehicleId], [d].[WorkspaceId], [a].[Id], [a].[AccessFailedCount], [a].[AssignedVehicleId], [a].[ConcurrencyStamp], [a].[CurrentLatitude], [a].[CurrentLongitude], [a].[DepotId], [a].[DriverStatus], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsAdmin], [a].[IsDispatcher], [a].[IsDriver], [a].[IsOnboarded], [a].[IsSuperAdmin], [a].[LicenseNumber], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Rating], [a].[SecurityStamp], [a].[TotalDeliveries], [a].[TwoFactorEnabled], [a].[UserData], [a].[UserName], [a].[WorkspaceId]
      FROM [Drivers] AS [d]
      LEFT JOIN [AspNetUsers] AS [a] ON [d].[UserId] = [a].[Id]
      WHERE [d].[Id] = @__request_DriverId_0 AND [d].[WorkspaceId] = @__User_WorkspaceId_1
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      Route already optimized with 3 stops. Creating journey stops directly...
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      Created 3 journey stops from route stops.
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      [DEBUG-BEFORE-ADD] Journey before adding to context - Status: Planned, StartedAt: 
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      [DEBUG-AFTER-ADD] Journey after AddAsync - Status: Planned, StartedAt: 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SET IMPLICIT_TRANSACTIONS OFF;
      SET NOCOUNT ON;
      INSERT INTO [Journeys] ([ArchivedAt], [CancelledAt], [CompletedAt], [CreatedAt], [CurrentStopIndex], [Date], [DriverId], [FinishedAt], [IsDeleted], [Polyline], [RouteId], [StartedAt], [Status], [UpdatedAt], [VehicleId], [WorkspaceId])
      OUTPUT INSERTED.[Id]
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p16='?' (Size = 500), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Double), @p20='?' (Size = 200), @p21='?' (Size = 500), @p22='?' (DbType = Int32), @p23='?' (DbType = Double), @p24='?' (DbType = Double), @p25='?' (Size = 200), @p26='?' (DbType = Time), @p27='?' (DbType = Time), @p28='?' (DbType = Time), @p29='?' (DbType = DateTime2), @p30='?' (DbType = DateTime2), @p31='?' (DbType = DateTime2), @p32='?' (DbType = Double), @p33='?' (Size = 4000), @p34='?' (DbType = Double), @p35='?' (DbType = Double), @p36='?' (DbType = Time), @p37='?' (DbType = Time), @p38='?' (DbType = Boolean), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (Size = 4000), @p43='?' (DbType = Double), @p44='?' (DbType = Double), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (DbType = DateTime2), @p48='?' (DbType = Time), @p49='?' (DbType = Time), @p50='?' (DbType = DateTime2), @p51='?' (DbType = DateTime2), @p52='?' (DbType = DateTime2), @p53='?' (DbType = Double), @p54='?' (Size = 4000), @p55='?' (DbType = Double), @p56='?' (DbType = Double), @p57='?' (DbType = Time), @p58='?' (DbType = Time), @p59='?' (DbType = Boolean), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Size = 4000), @p64='?' (DbType = Double), @p65='?' (DbType = Double), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (DbType = DateTime2), @p69='?' (DbType = Time), @p70='?' (DbType = Time), @p71='?' (DbType = DateTime2), @p72='?' (DbType = DateTime2), @p73='?' (DbType = DateTime2), @p74='?' (DbType = Double), @p75='?' (Size = 4000), @p76='?' (DbType = Double), @p77='?' (DbType = Double), @p78='?' (DbType = Time), @p79='?' (DbType = Time), @p80='?' (DbType = Boolean), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (DbType = Int32), @p84='?' (Size = 4000), @p85='?' (DbType = Double), @p86='?' (DbType = Double), @p87='?' (DbType = Int32), @p88='?' (DbType = Int32), @p89='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SET NOCOUNT ON;
      INSERT INTO [JourneyEndDetails] ([Address], [JourneyId], [Latitude], [Longitude], [Name])
      OUTPUT INSERTED.[Id]
      VALUES (@p16, @p17, @p18, @p19, @p20);
      INSERT INTO [JourneyStartDetails] ([Address], [JourneyId], [Latitude], [Longitude], [Name], [StartTime])
      OUTPUT INSERTED.[Id]
      VALUES (@p21, @p22, @p23, @p24, @p25, @p26);
      MERGE [JourneyStops] USING (
      VALUES (@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 0),
      (@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, 1),
      (@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, 2)) AS i ([ArriveBetweenEnd], [ArriveBetweenStart], [CheckInTime], [CheckOutTime], [CreatedAt], [Distance], [EndAddress], [EndLatitude], [EndLongitude], [EstimatedArrivalTime], [EstimatedDepartureTime], [IsDeleted], [JourneyId], [Order], [RouteStopId], [StartAddress], [StartLatitude], [StartLongitude], [Status], [StopId], [UpdatedAt], _Position) ON 1=0
      WHEN NOT MATCHED THEN
      INSERT ([ArriveBetweenEnd], [ArriveBetweenStart], [CheckInTime], [CheckOutTime], [CreatedAt], [Distance], [EndAddress], [EndLatitude], [EndLongitude], [EstimatedArrivalTime], [EstimatedDepartureTime], [IsDeleted], [JourneyId], [Order], [RouteStopId], [StartAddress], [StartLatitude], [StartLongitude], [Status], [StopId], [UpdatedAt])
      VALUES (i.[ArriveBetweenEnd], i.[ArriveBetweenStart], i.[CheckInTime], i.[CheckOutTime], i.[CreatedAt], i.[Distance], i.[EndAddress], i.[EndLatitude], i.[EndLongitude], i.[EstimatedArrivalTime], i.[EstimatedDepartureTime], i.[IsDeleted], i.[JourneyId], i.[Order], i.[RouteStopId], i.[StartAddress], i.[StartLatitude], i.[StartLongitude], i.[Status], i.[StopId], i.[UpdatedAt])
      OUTPUT INSERTED.[Id], i._Position;
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      [DEBUG-AFTER-SAVE] Journey after SaveChanges - Status: Planned, StartedAt: 
info: Monolith.WebAPI.Services.Email.EmailService[0]
      Email sent successfully to ucarere@gmail.com. MessageId: <202508210308.54135902453@smtp-relay.mailin.fr>
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      Journey assignment email sent to driver Ensar Uçarer (ucarere@gmail.com)
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__journey_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id0], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt0], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted0], [t].[Name], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status0], [t].[TotalDeliveries], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt0], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id4], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t0].[Id], [t0].[Address], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt], [t0].[CustomerId], [t0].[IsDeleted], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address0], [t0].[Code], [t0].[CreatedAt0], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted0], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt0], [t0].[WorkspaceId], [t].[Avatar], [t].[CreatedAt1], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted1], [t].[LicenseNumber], [t].[Name0], [t].[Phone], [t].[Rating], [t].[Status1], [t].[TotalDeliveries0], [t].[UpdatedAt1], [t].[UserId], [t].[VehicleId1], [t].[WorkspaceId1], [t].[Brand], [t].[Capacity], [t].[CreatedAt2], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted2], [t].[Model], [t].[PlateNumber], [t].[Status2], [t].[Type], [t].[UpdatedAt2], [t].[WorkspaceId2], [t].[Year], [t].[Address], [t].[CreatedAt3], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted3], [t].[Latitude], [t].[Longitude], [t].[Name1], [t].[StartWorkingHours], [t].[UpdatedAt3], [t].[WorkingHoursJson], [t].[WorkspaceId3], [t].[Address0], [t].[Latitude0], [t].[Longitude0], [t].[Name2], [t].[RouteId0], [t].[StartTime], [t].[Address1], [t].[Latitude1], [t].[Longitude1], [t].[Name3], [t].[RouteId1], [t1].[Id], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[CheckInTime], [t1].[CheckOutTime], [t1].[CreatedAt], [t1].[Distance], [t1].[EndAddress], [t1].[EndLatitude], [t1].[EndLongitude], [t1].[EstimatedArrivalTime], [t1].[EstimatedDepartureTime], [t1].[IsDeleted], [t1].[JourneyId], [t1].[Order], [t1].[RouteStopId], [t1].[StartAddress], [t1].[StartLatitude], [t1].[StartLongitude], [t1].[Status], [t1].[StopId], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address], [t1].[ArriveBetweenEnd0], [t1].[ArriveBetweenStart0], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt0], [t1].[CustomerId], [t1].[IsDeleted0], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order0], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt0], [t1].[Id1], [t1].[Address0], [t1].[Code], [t1].[CreatedAt1], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted1], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt1], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt4], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted4], [t].[LicenseNumber0], [t].[Name4], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt4], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId4], [t].[Address2], [t].[JourneyId], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[StartTime0], [t].[Address3], [t].[JourneyId0], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [r].[Id] AS [Id0], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt0], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted0], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status0], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt0], [r].[VehicleId] AS [VehicleId0], [r].[WorkspaceId] AS [WorkspaceId0], [d].[Id] AS [Id1], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt1], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted1], [d].[LicenseNumber], [d].[Name] AS [Name0], [d].[Phone], [d].[Rating], [d].[Status] AS [Status1], [d].[TotalDeliveries] AS [TotalDeliveries0], [d].[UpdatedAt] AS [UpdatedAt1], [d].[UserId], [d].[VehicleId] AS [VehicleId1], [d].[WorkspaceId] AS [WorkspaceId1], [v].[Id] AS [Id2], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt2], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted2], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status2], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt2], [v].[WorkspaceId] AS [WorkspaceId2], [v].[Year], [d0].[Id] AS [Id3], [d0].[Address], [d0].[CreatedAt] AS [CreatedAt3], [d0].[EndWorkingHours], [d0].[IsDefault], [d0].[IsDeleted] AS [IsDeleted3], [d0].[Latitude], [d0].[Longitude], [d0].[Name] AS [Name1], [d0].[StartWorkingHours], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[WorkingHoursJson], [d0].[WorkspaceId] AS [WorkspaceId3], [r0].[Id] AS [Id4], [r0].[Address] AS [Address0], [r0].[Latitude] AS [Latitude0], [r0].[Longitude] AS [Longitude0], [r0].[Name] AS [Name2], [r0].[RouteId] AS [RouteId0], [r0].[StartTime], [r1].[Id] AS [Id5], [r1].[Address] AS [Address1], [r1].[Latitude] AS [Latitude1], [r1].[Longitude] AS [Longitude1], [r1].[Name] AS [Name3], [r1].[RouteId] AS [RouteId1], [d1].[Id] AS [Id6], [d1].[Avatar] AS [Avatar0], [d1].[CreatedAt] AS [CreatedAt4], [d1].[CurrentLatitude] AS [CurrentLatitude0], [d1].[CurrentLongitude] AS [CurrentLongitude0], [d1].[Email] AS [Email0], [d1].[IsDeleted] AS [IsDeleted4], [d1].[LicenseNumber] AS [LicenseNumber0], [d1].[Name] AS [Name4], [d1].[Phone] AS [Phone0], [d1].[Rating] AS [Rating0], [d1].[Status] AS [Status3], [d1].[TotalDeliveries] AS [TotalDeliveries1], [d1].[UpdatedAt] AS [UpdatedAt4], [d1].[UserId] AS [UserId0], [d1].[VehicleId] AS [VehicleId2], [d1].[WorkspaceId] AS [WorkspaceId4], [j0].[Id] AS [Id7], [j0].[Address] AS [Address2], [j0].[JourneyId], [j0].[Latitude] AS [Latitude2], [j0].[Longitude] AS [Longitude2], [j0].[Name] AS [Name5], [j0].[StartTime] AS [StartTime0], [j1].[Id] AS [Id8], [j1].[Address] AS [Address3], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude3], [j1].[Longitude] AS [Longitude3], [j1].[Name] AS [Name6]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [Drivers] AS [d] ON [r].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
          INNER JOIN [Depots] AS [d0] ON [r].[DepotId] = [d0].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          INNER JOIN [Drivers] AS [d1] ON [j].[DriverId] = [d1].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          WHERE [j].[Id] = @__journey_Id_0
      ) AS [t]
      LEFT JOIN (
          SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [c].[Id] AS [Id0], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt0], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted0], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt0], [c].[WorkspaceId]
          FROM [RouteStops] AS [r2]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id0] = [t0].[RouteId]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r3].[Id] AS [Id0], [r3].[Address], [r3].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r3].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt] AS [CreatedAt0], [r3].[CustomerId], [r3].[IsDeleted] AS [IsDeleted0], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order] AS [Order0], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt] AS [UpdatedAt0], [c0].[Id] AS [Id1], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt1], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted1], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt1], [c0].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r3] ON [j2].[RouteStopId] = [r3].[Id]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id] = [t1].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id4], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t0].[Id], [t0].[Id0], [t1].[Id], [t1].[Id0], [t1].[Id1]
info: Monolith.WebAPI.Applications.Commands.Journeys.AssignRouteCommandHandler[0]
      [DEBUG-FINAL] Journey final state - Status: Planned, StartedAt: 
[DEBUG] Journey #1084 - Entity Status: Planned, Response Status: planned, StartedAt: 
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command AssignRouteCommand response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command StartJourneyCommand (Monolith.WebAPI.Applications.Commands.Journeys.StartJourneyCommand)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command StartJourneyCommand
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (8ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id0], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt0], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted0], [t].[Name], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status0], [t].[TotalDeliveries], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt0], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Id1], [t].[Id2], [t0].[Id], [t0].[Address], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt], [t0].[CustomerId], [t0].[IsDeleted], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address0], [t0].[Code], [t0].[CreatedAt0], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted0], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt0], [t0].[WorkspaceId], [t].[Avatar], [t].[CreatedAt1], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted1], [t].[LicenseNumber], [t].[Name0], [t].[Phone], [t].[Rating], [t].[Status1], [t].[TotalDeliveries0], [t].[UpdatedAt1], [t].[UserId], [t].[VehicleId1], [t].[WorkspaceId1], [t].[AccessFailedCount], [t].[AssignedVehicleId], [t].[ConcurrencyStamp], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[DepotId0], [t].[DriverStatus], [t].[Email0], [t].[EmailConfirmed], [t].[FullName], [t].[IsAdmin], [t].[IsDispatcher], [t].[IsDriver], [t].[IsOnboarded], [t].[IsSuperAdmin], [t].[LicenseNumber0], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[Rating0], [t].[SecurityStamp], [t].[TotalDeliveries1], [t].[TwoFactorEnabled], [t].[UserData], [t].[UserName], [t].[WorkspaceId2], [t1].[Id], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[CheckInTime], [t1].[CheckOutTime], [t1].[CreatedAt], [t1].[Distance], [t1].[EndAddress], [t1].[EndLatitude], [t1].[EndLongitude], [t1].[EstimatedArrivalTime], [t1].[EstimatedDepartureTime], [t1].[IsDeleted], [t1].[JourneyId], [t1].[Order], [t1].[RouteStopId], [t1].[StartAddress], [t1].[StartLatitude], [t1].[StartLongitude], [t1].[Status], [t1].[StopId], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address], [t1].[ArriveBetweenEnd0], [t1].[ArriveBetweenStart0], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt0], [t1].[CustomerId], [t1].[IsDeleted0], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order0], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt0], [t1].[Id1], [t1].[Address0], [t1].[Code], [t1].[CreatedAt1], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted1], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt1], [t1].[WorkspaceId]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [r].[Id] AS [Id0], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt0], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted0], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status0], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt0], [r].[VehicleId] AS [VehicleId0], [r].[WorkspaceId] AS [WorkspaceId0], [d].[Id] AS [Id1], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt1], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted1], [d].[LicenseNumber], [d].[Name] AS [Name0], [d].[Phone], [d].[Rating], [d].[Status] AS [Status1], [d].[TotalDeliveries] AS [TotalDeliveries0], [d].[UpdatedAt] AS [UpdatedAt1], [d].[UserId], [d].[VehicleId] AS [VehicleId1], [d].[WorkspaceId] AS [WorkspaceId1], [a].[Id] AS [Id2], [a].[AccessFailedCount], [a].[AssignedVehicleId], [a].[ConcurrencyStamp], [a].[CurrentLatitude] AS [CurrentLatitude0], [a].[CurrentLongitude] AS [CurrentLongitude0], [a].[DepotId] AS [DepotId0], [a].[DriverStatus], [a].[Email] AS [Email0], [a].[EmailConfirmed], [a].[FullName], [a].[IsAdmin], [a].[IsDispatcher], [a].[IsDriver], [a].[IsOnboarded], [a].[IsSuperAdmin], [a].[LicenseNumber] AS [LicenseNumber0], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Rating] AS [Rating0], [a].[SecurityStamp], [a].[TotalDeliveries] AS [TotalDeliveries1], [a].[TwoFactorEnabled], [a].[UserData], [a].[UserName], [a].[WorkspaceId] AS [WorkspaceId2]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [AspNetUsers] AS [a] ON [d].[UserId] = [a].[Id]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [r0].[Id], [r0].[Address], [r0].[ArriveBetweenEnd], [r0].[ArriveBetweenStart], [r0].[ContactEmail], [r0].[ContactFullName], [r0].[ContactPhone], [r0].[CreatedAt], [r0].[CustomerId], [r0].[IsDeleted], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[Notes], [r0].[Order], [r0].[OrderType], [r0].[ProofOfDeliveryRequired], [r0].[RouteId], [r0].[ServiceTime], [r0].[Type], [r0].[UpdatedAt], [c].[Id] AS [Id0], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt0], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted0], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt0], [c].[WorkspaceId]
          FROM [RouteStops] AS [r0]
          LEFT JOIN [Customers] AS [c] ON [r0].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id0] = [t0].[RouteId]
      LEFT JOIN (
          SELECT [j0].[Id], [j0].[ArriveBetweenEnd], [j0].[ArriveBetweenStart], [j0].[CheckInTime], [j0].[CheckOutTime], [j0].[CreatedAt], [j0].[Distance], [j0].[EndAddress], [j0].[EndLatitude], [j0].[EndLongitude], [j0].[EstimatedArrivalTime], [j0].[EstimatedDepartureTime], [j0].[IsDeleted], [j0].[JourneyId], [j0].[Order], [j0].[RouteStopId], [j0].[StartAddress], [j0].[StartLatitude], [j0].[StartLongitude], [j0].[Status], [j0].[StopId], [j0].[UpdatedAt], [r1].[Id] AS [Id0], [r1].[Address], [r1].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r1].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r1].[ContactEmail], [r1].[ContactFullName], [r1].[ContactPhone], [r1].[CreatedAt] AS [CreatedAt0], [r1].[CustomerId], [r1].[IsDeleted] AS [IsDeleted0], [r1].[Latitude], [r1].[Longitude], [r1].[Name], [r1].[Notes], [r1].[Order] AS [Order0], [r1].[OrderType], [r1].[ProofOfDeliveryRequired], [r1].[RouteId], [r1].[ServiceTime], [r1].[Type], [r1].[UpdatedAt] AS [UpdatedAt0], [c0].[Id] AS [Id1], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt1], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted1], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt1], [c0].[WorkspaceId]
          FROM [JourneyStops] AS [j0]
          INNER JOIN [RouteStops] AS [r1] ON [j0].[RouteStopId] = [r1].[Id]
          LEFT JOIN [Customers] AS [c0] ON [r1].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id] = [t1].[JourneyId]
      ORDER BY [t].[Id], [t].[Id0], [t].[Id1], [t].[Id2], [t0].[Id], [t0].[Id0], [t1].[Id], [t1].[Id0]
[CRITICAL] Journey.Start() called for Journey #1084 - StackTrace:    at System.Environment.get_StackTrace()
   at Monolith.WebAPI.Data.Journeys.Journey.Start() in C:\Users\QP\Desktop\monolith-master2\src\Monolith.WebAPI\Data\Journeys\Journey.cs:line 90
   at Monolith.WebAPI.Applications.Commands.Journeys.StartJourneyCommandHandler.HandleCommand(StartJourneyCommand request, CancellationToken cancellationToken) in C:\Users\QP\Desktop\monolith-master2\src\Monolith.WebAPI\Applications\Commands\Journeys\StartJourneyCommand.cs:line 65
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)
   at System.Threading.Tasks.TaskCompletionSource`1.TrySetResult(TResult result)
   at Microsoft.Data.SqlClient.SqlDataReader.CompleteAsyncCall[T](Task`1 task, SqlDataReaderBaseAsyncCallContext`1 context)
   at Microsoft.Data.SqlClient.SqlDataReader.SqlDataReaderBaseAsyncCallContext`1.CompleteAsyncCallCallback(Task`1 task, Object state)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SET IMPLICIT_TRANSACTIONS OFF;
      SET NOCOUNT ON;
      UPDATE [Journeys] SET [StartedAt] = @p0, [Status] = @p1
      OUTPUT 1
      WHERE [Id] = @p2;
info: Monolith.WebAPI.Services.Email.EmailService[0]
      Email sent successfully to ucarere@gmail.com. MessageId: <202508210308.61581452339@smtp-relay.mailin.fr>
info: Monolith.WebAPI.Applications.Commands.Journeys.StartJourneyCommandHandler[0]
      Journey started email sent to customer Toyota Sakarya (ucarere@gmail.com)
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command StartJourneyCommand response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneysSummaryQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneysSummaryQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneysSummaryQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__User_WorkspaceId_0='?' (DbType = Int32), @__fromDate_1='?' (DbType = DateTime2), @__toDate_2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SELECT [j].[Id], [j].[RouteId], [r].[Name], [j].[CreatedAt], CONVERT(varchar(11), [d].[Id]), [d].[Name], CASE
          WHEN [v].[Id] IS NOT NULL THEN CONVERT(varchar(11), [v].[Id])
          ELSE NULL
      END, CASE
          WHEN [v].[Id] IS NOT NULL THEN [v].[PlateNumber]
          ELSE N'Atanmadı'
      END, (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j0]
          WHERE [j].[Id] = [j0].[JourneyId]), (
          SELECT COUNT(*)
          FROM [JourneyStops] AS [j1]
          WHERE [j].[Id] = [j1].[JourneyId] AND [j1].[Status] = 2), COALESCE([r].[TotalDistance], 0.0E0), COALESCE([r].[TotalDuration], 0), [j].[StartedAt], [j].[CompletedAt], [j].[CancelledAt], [j].[FinishedAt], [j].[ArchivedAt], CASE
          WHEN [d].[CurrentLatitude] IS NOT NULL AND [d].[CurrentLongitude] IS NOT NULL THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END, [d].[CurrentLatitude], [d].[CurrentLongitude]
      FROM [Journeys] AS [j]
      INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
      INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      WHERE [r].[WorkspaceId] = @__User_WorkspaceId_0 AND [j].[CreatedAt] >= @__fromDate_1 AND [j].[CreatedAt] <= @__toDate_2
      ORDER BY [j].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneysSummaryQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetRoutesQuery (GetRoutesQuery { WorkspaceId = 1 })
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetRoutesQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId], [d0].[Id], [d0].[Avatar], [d0].[CreatedAt], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email], [d0].[IsDeleted], [d0].[LicenseNumber], [d0].[Name], [d0].[Phone], [d0].[Rating], [d0].[Status], [d0].[TotalDeliveries], [d0].[UpdatedAt], [d0].[UserId], [d0].[VehicleId], [d0].[WorkspaceId], [v].[Id], [v].[Brand], [v].[Capacity], [v].[CreatedAt], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted], [v].[Model], [v].[PlateNumber], [v].[Status], [v].[Type], [v].[UpdatedAt], [v].[WorkspaceId], [v].[Year], [r0].[Id], [r1].[Id], [r0].[Address], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[RouteId], [r0].[StartTime], [r1].[Address], [r1].[Latitude], [r1].[Longitude], [r1].[Name], [r1].[RouteId]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [r2].[Id], [r2].[Address], [r2].[ArriveBetweenEnd], [r2].[ArriveBetweenStart], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt], [r2].[CustomerId], [r2].[IsDeleted], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt], [r].[Id], [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
      FROM [Routes] AS [r]
      INNER JOIN [Depots] AS [d] ON [r].[DepotId] = [d].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [r].[VehicleId] = [v].[Id]
      LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
      LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
      INNER JOIN [RouteStops] AS [r2] ON [r].[Id] = [r2].[RouteId]
      WHERE [r].[WorkspaceId] = @__request_WorkspaceId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
      ORDER BY [r].[Date] DESC, [r].[Id] DESC, [d].[Id], [d0].[Id], [v].[Id], [r0].[Id], [r1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__request_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetRoutesQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetCustomersQuery (Monolith.WebAPI.Applications.Queries.Customers.GetCustomersQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetCustomersQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__User_WorkspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_1) [c].[Id], [c].[Address], [c].[Code], [c].[CreatedAt], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted], [c].[Latitude], [c].[Longitude], [c].[Name], [c].[Notes], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt], [c].[WorkspaceId]
      FROM [Customers] AS [c]
      WHERE [c].[WorkspaceId] = @__User_WorkspaceId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
      ORDER BY COALESCE([c].[UpdatedAt], [c].[CreatedAt]) DESC, [c].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetCustomersQuery response handled
SignalR Token received for path: /hubs/journey
JWT Token validated for: Firma Yöneticisi
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[5]
      OnConnectedAsync started.
JWT Token validated for: Firma Yöneticisi
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver[2]
      Found protocol implementation for requested protocol: json.
dbug: Microsoft.AspNetCore.SignalR.HubConnectionContext[1]
      Completed connection handshake. Using HubProtocol 'json'.
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      User 1cccb212-17e9-4696-a369-3f2360d7ad7c connected to workspace 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
SignalR Token received for path: /hubs/tracking
JWT Token validated for: Firma Yöneticisi
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[5]
      OnConnectedAsync started.
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver[2]
      Found protocol implementation for requested protocol: json.
dbug: Microsoft.AspNetCore.SignalR.HubConnectionContext[1]
      Completed connection handshake. Using HubProtocol 'json'.
info: Monolith.WebAPI.Hubs.TrackingHub[0]
      User 1cccb212-17e9-4696-a369-3f2360d7ad7c connected to tracking for workspace 1
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher[1]
      Received hub invocation: InvocationMessage { InvocationId: "0", Target: "JoinJourneyGroup", Arguments: [ 1084 ], StreamIds: [  ] }.
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      Connection kO0l97AGEgEemwkP7t_d5g joined journey-1084
dbug: Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher[1]
      Received hub invocation: InvocationMessage { InvocationId: "1", Target: "JoinJourneyGroup", Arguments: [ 1084 ], StreamIds: [  ] }.
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      Connection kO0l97AGEgEemwkP7t_d5g joined journey-1084
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Ensar Uçarer
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1724d2e6-423a-4db1-36b3-08dddec8ff95
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ensar Uçarer
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: exp, Value: 1756336231
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: aud, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneysQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneysQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneysQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AssignedVehicleId], [a].[ConcurrencyStamp], [a].[CurrentLatitude], [a].[CurrentLongitude], [a].[DepotId], [a].[DriverStatus], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsAdmin], [a].[IsDispatcher], [a].[IsDriver], [a].[IsOnboarded], [a].[IsSuperAdmin], [a].[LicenseNumber], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Rating], [a].[SecurityStamp], [a].[TotalDeliveries], [a].[TwoFactorEnabled], [a].[UserData], [a].[UserName], [a].[WorkspaceId], [w].[Id], [w].[Active], [w].[CostPerHour], [w].[CostPerKm], [w].[CreatedAt], [w].[Currency], [w].[DefaultServiceTime], [w].[DistanceUnit], [w].[Email], [w].[IsDeleted], [w].[Language], [w].[MaximumDriverCount], [w].[Name], [w].[PhoneNumber], [w].[TimeZone], [w].[UpdatedAt], [d].[Id], [d].[Address], [d].[CreatedAt], [d].[EndWorkingHours], [d].[IsDefault], [d].[IsDeleted], [d].[Latitude], [d].[Longitude], [d].[Name], [d].[StartWorkingHours], [d].[UpdatedAt], [d].[WorkingHoursJson], [d].[WorkspaceId]
      FROM [AspNetUsers] AS [a]
      INNER JOIN [Workspaces] AS [w] ON [a].[WorkspaceId] = [w].[Id]
      LEFT JOIN [Depots] AS [d] ON [a].[DepotId] = [d].[Id]
      WHERE [a].[Id] = @__userId_0
warn: Microsoft.EntityFrameworkCore.Query[20504]
      Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (5ms) [Parameters=[@__User_WorkspaceId_0='?' (DbType = Int32), @__User_Id_1='?' (DbType = Guid), @__request_From_Value_2='?' (DbType = DateTime2), @__request_To_Value_3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
      SELECT [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [d].[Id], [d].[Avatar], [d].[CreatedAt], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted], [d].[LicenseNumber], [d].[Name], [d].[Phone], [d].[Rating], [d].[Status], [d].[TotalDeliveries], [d].[UpdatedAt], [d].[UserId], [d].[VehicleId], [d].[WorkspaceId], [v].[Id], [v].[Brand], [v].[Capacity], [v].[CreatedAt], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted], [v].[Model], [v].[PlateNumber], [v].[Status], [v].[Type], [v].[UpdatedAt], [v].[WorkspaceId], [v].[Year], [j0].[Id], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id], [j1].[Address], [j1].[JourneyId], [j1].[Latitude], [j1].[Longitude], [j1].[Name], [r].[Id], [r].[CompletedAt], [r].[CompletedDeliveries], [r].[CreatedAt], [r].[Date], [r].[DepotId], [r].[DriverId], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[Optimized], [r].[StartedAt], [r].[Status], [r].[TotalDeliveries], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt], [r].[VehicleId], [r].[WorkspaceId], [v0].[Id], [v0].[Brand], [v0].[Capacity], [v0].[CreatedAt], [v0].[DeletedAt], [v0].[FuelType], [v0].[IsDeleted], [v0].[Model], [v0].[PlateNumber], [v0].[Status], [v0].[Type], [v0].[UpdatedAt], [v0].[WorkspaceId], [v0].[Year], [d0].[Id], [d0].[Avatar], [d0].[CreatedAt], [d0].[CurrentLatitude], [d0].[CurrentLongitude], [d0].[Email], [d0].[IsDeleted], [d0].[LicenseNumber], [d0].[Name], [d0].[Phone], [d0].[Rating], [d0].[Status], [d0].[TotalDeliveries], [d0].[UpdatedAt], [d0].[UserId], [d0].[VehicleId], [d0].[WorkspaceId], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t1].[Id], [t1].[AdditionalValues], [t1].[CreatedAt], [t1].[FailureReason], [t1].[IsDeleted], [t1].[JourneyId], [t1].[Latitude], [t1].[Longitude], [t1].[Notes], [t1].[PhotoBase64], [t1].[PhotoUrl], [t1].[SignatureBase64], [t1].[SignatureUrl], [t1].[Status], [t1].[StopId], [t1].[UpdatedAt]
      FROM [Journeys] AS [j]
      INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
      LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
      LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
      LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
      INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
      LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
      LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
      OUTER APPLY (
          SELECT [t].[Id], [t].[ArriveBetweenEnd], [t].[ArriveBetweenStart], [t].[CheckInTime], [t].[CheckOutTime], [t].[CreatedAt], [t].[Distance], [t].[EndAddress], [t].[EndLatitude], [t].[EndLongitude], [t].[EstimatedArrivalTime], [t].[EstimatedDepartureTime], [t].[IsDeleted], [t].[JourneyId], [t].[Order], [t].[RouteStopId], [t].[StartAddress], [t].[StartLatitude], [t].[StartLongitude], [t].[Status], [t].[StopId], [t].[UpdatedAt], [r0].[Id] AS [Id0], [r0].[Address], [r0].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r0].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r0].[ContactEmail], [r0].[ContactFullName], [r0].[ContactPhone], [r0].[CreatedAt] AS [CreatedAt0], [r0].[CustomerId], [r0].[IsDeleted] AS [IsDeleted0], [r0].[Latitude], [r0].[Longitude], [r0].[Name], [r0].[Notes], [r0].[Order] AS [Order0], [r0].[OrderType], [r0].[ProofOfDeliveryRequired], [r0].[RouteId], [r0].[ServiceTime], [r0].[Type], [r0].[UpdatedAt] AS [UpdatedAt0]
          FROM (
              SELECT TOP(50) [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt]
              FROM [JourneyStops] AS [j2]
              WHERE [j].[Id] = [j2].[JourneyId]
              ORDER BY [j2].[Order]
          ) AS [t]
          INNER JOIN [RouteStops] AS [r0] ON [t].[RouteStopId] = [r0].[Id]
      ) AS [t0]
      LEFT JOIN (
          SELECT [t2].[Id], [t2].[AdditionalValues], [t2].[CreatedAt], [t2].[FailureReason], [t2].[IsDeleted], [t2].[JourneyId], [t2].[Latitude], [t2].[Longitude], [t2].[Notes], [t2].[PhotoBase64], [t2].[PhotoUrl], [t2].[SignatureBase64], [t2].[SignatureUrl], [t2].[Status], [t2].[StopId], [t2].[UpdatedAt]
          FROM (
              SELECT [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], ROW_NUMBER() OVER(PARTITION BY [j3].[JourneyId] ORDER BY [j3].[CreatedAt] DESC) AS [row]
              FROM [JourneyStatuses] AS [j3]
          ) AS [t2]
          WHERE [t2].[row] <= 10
      ) AS [t1] ON [j].[Id] = [t1].[JourneyId]
      WHERE [j].[WorkspaceId] = @__User_WorkspaceId_0 AND [d].[UserId] = @__User_Id_1 AND [j].[Date] >= @__request_From_Value_2 AND [j].[Date] <= @__request_To_Value_3
      ORDER BY [j].[Date] DESC, [j].[StartedAt] DESC, [j].[Id], [d].[Id], [v].[Id], [j0].[Id], [j1].[Id], [r].[Id], [v0].[Id], [d0].[Id], [t0].[Order], [t0].[Id], [t0].[Id0], [t1].[JourneyId], [t1].[CreatedAt] DESC
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneysQuery response handled
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
[DEBUG] Journey #1083 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:04:12
[DEBUG] Journey #1082 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:00:04
[DEBUG] Journey #1081 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:59:35
[DEBUG] Journey #1080 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:58:57
[DEBUG] Journey #1079 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:58:32
[DEBUG] Journey #1078 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:58:09
[DEBUG] Journey #1077 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:57:48
[DEBUG] Journey #1076 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:57:25
[DEBUG] Journey #1075 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:56:58
[DEBUG] Journey #1074 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:48:27
[DEBUG] Journey #1073 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:46:33
[DEBUG] Journey #1072 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:45:16
[DEBUG] Journey #1071 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:28:47
[DEBUG] Journey #1070 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:28:20
[DEBUG] Journey #1069 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:26:40
[DEBUG] Journey #1068 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:26:16
[DEBUG] Journey #1067 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:19:57
[DEBUG] Journey #1066 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:15:25
[DEBUG] Journey #1065 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 02:12:55
[DEBUG] Journey #1064 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:51:55
[DEBUG] Journey #1063 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:49:53
[DEBUG] Journey #1062 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:48:26
[DEBUG] Journey #1061 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:45:46
[DEBUG] Journey #1060 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:45:23
[DEBUG] Journey #1059 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:43:02
[DEBUG] Journey #1058 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 01:40:00
[DEBUG] Journey #1057 - Entity Status: Completed, Response Status: completed, StartedAt: 21.08.2025 00:42:07
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
JWT Token validated for: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] All claims in token:
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1cccb212-17e9-4696-a369-3f2360d7ad7c
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Firma Yöneticisi
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: workspaceId, Value: 1
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: IsAdmin, Value: true
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
        - Type: iss, Value: https://halilkocaoz.com
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Found WorkspaceId: 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__workspaceId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT CASE
          WHEN EXISTS (
              SELECT 1
              FROM [Workspaces] AS [w]
              WHERE [w].[Id] = @__workspaceId_0) THEN CAST(1 AS bit)
          ELSE CAST(0 AS bit)
      END
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 exists: True
info: Monolith.WebAPI.Infrastructure.SubscriptionControllerMiddleware[0]
      [Middleware] Workspace 1 active status: True
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Handling command GetJourneyQuery (Monolith.WebAPI.Applications.Queries.Journeys.GetJourneyQuery)
info: Monolith.WebAPI.Applications.Behaviors.ValidatorBehavior[0]
      Validating command GetJourneyQuery
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_JourneyId_0='?' (DbType = Int32), @__User_WorkspaceId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT [t].[Id], [t].[ArchivedAt], [t].[CancelledAt], [t].[CompletedAt], [t].[CreatedAt], [t].[CurrentStopIndex], [t].[Date], [t].[DriverId], [t].[FinishedAt], [t].[IsDeleted], [t].[Polyline], [t].[RouteId], [t].[StartedAt], [t].[Status], [t].[UpdatedAt], [t].[VehicleId], [t].[WorkspaceId], [t].[LiveLocation_Accuracy], [t].[LiveLocation_Heading], [t].[LiveLocation_Latitude], [t].[LiveLocation_Longitude], [t].[LiveLocation_Speed], [t].[LiveLocation_Timestamp], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[ArriveBetweenEnd], [t0].[ArriveBetweenStart], [t0].[CheckInTime], [t0].[CheckOutTime], [t0].[CreatedAt], [t0].[Distance], [t0].[EndAddress], [t0].[EndLatitude], [t0].[EndLongitude], [t0].[EstimatedArrivalTime], [t0].[EstimatedDepartureTime], [t0].[IsDeleted], [t0].[JourneyId], [t0].[Order], [t0].[RouteStopId], [t0].[StartAddress], [t0].[StartLatitude], [t0].[StartLongitude], [t0].[Status], [t0].[StopId], [t0].[UpdatedAt], [t0].[Id0], [t0].[Address], [t0].[ArriveBetweenEnd0], [t0].[ArriveBetweenStart0], [t0].[ContactEmail], [t0].[ContactFullName], [t0].[ContactPhone], [t0].[CreatedAt0], [t0].[CustomerId], [t0].[IsDeleted0], [t0].[Latitude], [t0].[Longitude], [t0].[Name], [t0].[Notes], [t0].[Order0], [t0].[OrderType], [t0].[ProofOfDeliveryRequired], [t0].[RouteId], [t0].[ServiceTime], [t0].[Type], [t0].[UpdatedAt0], [t0].[Id1], [t0].[Address0], [t0].[Code], [t0].[CreatedAt1], [t0].[Email], [t0].[EstimatedServiceTime], [t0].[IsDeleted1], [t0].[Latitude0], [t0].[Longitude0], [t0].[Name0], [t0].[Notes0], [t0].[Phone], [t0].[Priority], [t0].[Tags], [t0].[TimeWindowEnd], [t0].[TimeWindowStart], [t0].[UpdatedAt1], [t0].[WorkspaceId], [t].[Address], [t].[JourneyId], [t].[Latitude], [t].[Longitude], [t].[Name], [t].[StartTime], [t].[Address0], [t].[JourneyId0], [t].[Latitude0], [t].[Longitude0], [t].[Name0], [j3].[Id], [j3].[AdditionalValues], [j3].[CreatedAt], [j3].[FailureReason], [j3].[IsDeleted], [j3].[JourneyId], [j3].[Latitude], [j3].[Longitude], [j3].[Notes], [j3].[PhotoBase64], [j3].[PhotoUrl], [j3].[SignatureBase64], [j3].[SignatureUrl], [j3].[Status], [j3].[StopId], [j3].[UpdatedAt], [t].[Avatar], [t].[CreatedAt0], [t].[CurrentLatitude], [t].[CurrentLongitude], [t].[Email], [t].[IsDeleted0], [t].[LicenseNumber], [t].[Name1], [t].[Phone], [t].[Rating], [t].[Status0], [t].[TotalDeliveries], [t].[UpdatedAt0], [t].[UserId], [t].[VehicleId0], [t].[WorkspaceId0], [t].[Brand], [t].[Capacity], [t].[CreatedAt1], [t].[DeletedAt], [t].[FuelType], [t].[IsDeleted1], [t].[Model], [t].[PlateNumber], [t].[Status1], [t].[Type], [t].[UpdatedAt1], [t].[WorkspaceId1], [t].[Year], [t].[CompletedAt0], [t].[CompletedDeliveries], [t].[CreatedAt2], [t].[Date0], [t].[DepotId], [t].[DriverId0], [t].[IsDeleted2], [t].[Name2], [t].[Notes], [t].[Optimized], [t].[StartedAt0], [t].[Status2], [t].[TotalDeliveries0], [t].[TotalDistance], [t].[TotalDuration], [t].[UpdatedAt2], [t].[VehicleId1], [t].[WorkspaceId2], [t1].[Id], [t1].[Address], [t1].[ArriveBetweenEnd], [t1].[ArriveBetweenStart], [t1].[ContactEmail], [t1].[ContactFullName], [t1].[ContactPhone], [t1].[CreatedAt], [t1].[CustomerId], [t1].[IsDeleted], [t1].[Latitude], [t1].[Longitude], [t1].[Name], [t1].[Notes], [t1].[Order], [t1].[OrderType], [t1].[ProofOfDeliveryRequired], [t1].[RouteId], [t1].[ServiceTime], [t1].[Type], [t1].[UpdatedAt], [t1].[Id0], [t1].[Address0], [t1].[Code], [t1].[CreatedAt0], [t1].[Email], [t1].[EstimatedServiceTime], [t1].[IsDeleted0], [t1].[Latitude0], [t1].[Longitude0], [t1].[Name0], [t1].[Notes0], [t1].[Phone], [t1].[Priority], [t1].[Tags], [t1].[TimeWindowEnd], [t1].[TimeWindowStart], [t1].[UpdatedAt0], [t1].[WorkspaceId], [t].[Avatar0], [t].[CreatedAt3], [t].[CurrentLatitude0], [t].[CurrentLongitude0], [t].[Email0], [t].[IsDeleted3], [t].[LicenseNumber0], [t].[Name3], [t].[Phone0], [t].[Rating0], [t].[Status3], [t].[TotalDeliveries1], [t].[UpdatedAt3], [t].[UserId0], [t].[VehicleId2], [t].[WorkspaceId3], [t].[Brand0], [t].[Capacity0], [t].[CreatedAt4], [t].[DeletedAt0], [t].[FuelType0], [t].[IsDeleted4], [t].[Model0], [t].[PlateNumber0], [t].[Status4], [t].[Type0], [t].[UpdatedAt4], [t].[WorkspaceId4], [t].[Year0], [t].[Address1], [t].[CreatedAt5], [t].[EndWorkingHours], [t].[IsDefault], [t].[IsDeleted5], [t].[Latitude1], [t].[Longitude1], [t].[Name4], [t].[StartWorkingHours], [t].[UpdatedAt5], [t].[WorkingHoursJson], [t].[WorkspaceId5], [t].[Address2], [t].[Latitude2], [t].[Longitude2], [t].[Name5], [t].[RouteId0], [t].[StartTime0], [t].[Address3], [t].[Latitude3], [t].[Longitude3], [t].[Name6], [t].[RouteId1]
      FROM (
          SELECT TOP(1) [j].[Id], [j].[ArchivedAt], [j].[CancelledAt], [j].[CompletedAt], [j].[CreatedAt], [j].[CurrentStopIndex], [j].[Date], [j].[DriverId], [j].[FinishedAt], [j].[IsDeleted], [j].[Polyline], [j].[RouteId], [j].[StartedAt], [j].[Status], [j].[UpdatedAt], [j].[VehicleId], [j].[WorkspaceId], [j].[LiveLocation_Accuracy], [j].[LiveLocation_Heading], [j].[LiveLocation_Latitude], [j].[LiveLocation_Longitude], [j].[LiveLocation_Speed], [j].[LiveLocation_Timestamp], [j0].[Id] AS [Id0], [j0].[Address], [j0].[JourneyId], [j0].[Latitude], [j0].[Longitude], [j0].[Name], [j0].[StartTime], [j1].[Id] AS [Id1], [j1].[Address] AS [Address0], [j1].[JourneyId] AS [JourneyId0], [j1].[Latitude] AS [Latitude0], [j1].[Longitude] AS [Longitude0], [j1].[Name] AS [Name0], [d].[Id] AS [Id2], [d].[Avatar], [d].[CreatedAt] AS [CreatedAt0], [d].[CurrentLatitude], [d].[CurrentLongitude], [d].[Email], [d].[IsDeleted] AS [IsDeleted0], [d].[LicenseNumber], [d].[Name] AS [Name1], [d].[Phone], [d].[Rating], [d].[Status] AS [Status0], [d].[TotalDeliveries], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [d].[VehicleId] AS [VehicleId0], [d].[WorkspaceId] AS [WorkspaceId0], [v].[Id] AS [Id3], [v].[Brand], [v].[Capacity], [v].[CreatedAt] AS [CreatedAt1], [v].[DeletedAt], [v].[FuelType], [v].[IsDeleted] AS [IsDeleted1], [v].[Model], [v].[PlateNumber], [v].[Status] AS [Status1], [v].[Type], [v].[UpdatedAt] AS [UpdatedAt1], [v].[WorkspaceId] AS [WorkspaceId1], [v].[Year], [r].[Id] AS [Id4], [r].[CompletedAt] AS [CompletedAt0], [r].[CompletedDeliveries], [r].[CreatedAt] AS [CreatedAt2], [r].[Date] AS [Date0], [r].[DepotId], [r].[DriverId] AS [DriverId0], [r].[IsDeleted] AS [IsDeleted2], [r].[Name] AS [Name2], [r].[Notes], [r].[Optimized], [r].[StartedAt] AS [StartedAt0], [r].[Status] AS [Status2], [r].[TotalDeliveries] AS [TotalDeliveries0], [r].[TotalDistance], [r].[TotalDuration], [r].[UpdatedAt] AS [UpdatedAt2], [r].[VehicleId] AS [VehicleId1], [r].[WorkspaceId] AS [WorkspaceId2], [d0].[Id] AS [Id5], [d0].[Avatar] AS [Avatar0], [d0].[CreatedAt] AS [CreatedAt3], [d0].[CurrentLatitude] AS [CurrentLatitude0], [d0].[CurrentLongitude] AS [CurrentLongitude0], [d0].[Email] AS [Email0], [d0].[IsDeleted] AS [IsDeleted3], [d0].[LicenseNumber] AS [LicenseNumber0], [d0].[Name] AS [Name3], [d0].[Phone] AS [Phone0], [d0].[Rating] AS [Rating0], [d0].[Status] AS [Status3], [d0].[TotalDeliveries] AS [TotalDeliveries1], [d0].[UpdatedAt] AS [UpdatedAt3], [d0].[UserId] AS [UserId0], [d0].[VehicleId] AS [VehicleId2], [d0].[WorkspaceId] AS [WorkspaceId3], [v0].[Id] AS [Id6], [v0].[Brand] AS [Brand0], [v0].[Capacity] AS [Capacity0], [v0].[CreatedAt] AS [CreatedAt4], [v0].[DeletedAt] AS [DeletedAt0], [v0].[FuelType] AS [FuelType0], [v0].[IsDeleted] AS [IsDeleted4], [v0].[Model] AS [Model0], [v0].[PlateNumber] AS [PlateNumber0], [v0].[Status] AS [Status4], [v0].[Type] AS [Type0], [v0].[UpdatedAt] AS [UpdatedAt4], [v0].[WorkspaceId] AS [WorkspaceId4], [v0].[Year] AS [Year0], [d1].[Id] AS [Id7], [d1].[Address] AS [Address1], [d1].[CreatedAt] AS [CreatedAt5], [d1].[EndWorkingHours], [d1].[IsDefault], [d1].[IsDeleted] AS [IsDeleted5], [d1].[Latitude] AS [Latitude1], [d1].[Longitude] AS [Longitude1], [d1].[Name] AS [Name4], [d1].[StartWorkingHours], [d1].[UpdatedAt] AS [UpdatedAt5], [d1].[WorkingHoursJson], [d1].[WorkspaceId] AS [WorkspaceId5], [r0].[Id] AS [Id8], [r0].[Address] AS [Address2], [r0].[Latitude] AS [Latitude2], [r0].[Longitude] AS [Longitude2], [r0].[Name] AS [Name5], [r0].[RouteId] AS [RouteId0], [r0].[StartTime] AS [StartTime0], [r1].[Id] AS [Id9], [r1].[Address] AS [Address3], [r1].[Latitude] AS [Latitude3], [r1].[Longitude] AS [Longitude3], [r1].[Name] AS [Name6], [r1].[RouteId] AS [RouteId1]
          FROM [Journeys] AS [j]
          INNER JOIN [Routes] AS [r] ON [j].[RouteId] = [r].[Id]
          LEFT JOIN [JourneyStartDetails] AS [j0] ON [j].[Id] = [j0].[JourneyId]
          LEFT JOIN [JourneyEndDetails] AS [j1] ON [j].[Id] = [j1].[JourneyId]
          INNER JOIN [Drivers] AS [d] ON [j].[DriverId] = [d].[Id]
          LEFT JOIN [Vehicles] AS [v] ON [j].[VehicleId] = [v].[Id]
          LEFT JOIN [Drivers] AS [d0] ON [r].[DriverId] = [d0].[Id]
          LEFT JOIN [Vehicles] AS [v0] ON [r].[VehicleId] = [v0].[Id]
          INNER JOIN [Depots] AS [d1] ON [r].[DepotId] = [d1].[Id]
          LEFT JOIN [RouteStartDetails] AS [r0] ON [r].[Id] = [r0].[RouteId]
          LEFT JOIN [RouteEndDetails] AS [r1] ON [r].[Id] = [r1].[RouteId]
          WHERE [j].[Id] = @__request_JourneyId_0 AND [r].[WorkspaceId] = @__User_WorkspaceId_1
      ) AS [t]
      LEFT JOIN (
          SELECT [j2].[Id], [j2].[ArriveBetweenEnd], [j2].[ArriveBetweenStart], [j2].[CheckInTime], [j2].[CheckOutTime], [j2].[CreatedAt], [j2].[Distance], [j2].[EndAddress], [j2].[EndLatitude], [j2].[EndLongitude], [j2].[EstimatedArrivalTime], [j2].[EstimatedDepartureTime], [j2].[IsDeleted], [j2].[JourneyId], [j2].[Order], [j2].[RouteStopId], [j2].[StartAddress], [j2].[StartLatitude], [j2].[StartLongitude], [j2].[Status], [j2].[StopId], [j2].[UpdatedAt], [r2].[Id] AS [Id0], [r2].[Address], [r2].[ArriveBetweenEnd] AS [ArriveBetweenEnd0], [r2].[ArriveBetweenStart] AS [ArriveBetweenStart0], [r2].[ContactEmail], [r2].[ContactFullName], [r2].[ContactPhone], [r2].[CreatedAt] AS [CreatedAt0], [r2].[CustomerId], [r2].[IsDeleted] AS [IsDeleted0], [r2].[Latitude], [r2].[Longitude], [r2].[Name], [r2].[Notes], [r2].[Order] AS [Order0], [r2].[OrderType], [r2].[ProofOfDeliveryRequired], [r2].[RouteId], [r2].[ServiceTime], [r2].[Type], [r2].[UpdatedAt] AS [UpdatedAt0], [c].[Id] AS [Id1], [c].[Address] AS [Address0], [c].[Code], [c].[CreatedAt] AS [CreatedAt1], [c].[Email], [c].[EstimatedServiceTime], [c].[IsDeleted] AS [IsDeleted1], [c].[Latitude] AS [Latitude0], [c].[Longitude] AS [Longitude0], [c].[Name] AS [Name0], [c].[Notes] AS [Notes0], [c].[Phone], [c].[Priority], [c].[Tags], [c].[TimeWindowEnd], [c].[TimeWindowStart], [c].[UpdatedAt] AS [UpdatedAt1], [c].[WorkspaceId]
          FROM [JourneyStops] AS [j2]
          INNER JOIN [RouteStops] AS [r2] ON [j2].[RouteStopId] = [r2].[Id]
          LEFT JOIN [Customers] AS [c] ON [r2].[CustomerId] = [c].[Id]
      ) AS [t0] ON [t].[Id] = [t0].[JourneyId]
      LEFT JOIN [JourneyStatuses] AS [j3] ON [t].[Id] = [j3].[JourneyId]
      LEFT JOIN (
          SELECT [r3].[Id], [r3].[Address], [r3].[ArriveBetweenEnd], [r3].[ArriveBetweenStart], [r3].[ContactEmail], [r3].[ContactFullName], [r3].[ContactPhone], [r3].[CreatedAt], [r3].[CustomerId], [r3].[IsDeleted], [r3].[Latitude], [r3].[Longitude], [r3].[Name], [r3].[Notes], [r3].[Order], [r3].[OrderType], [r3].[ProofOfDeliveryRequired], [r3].[RouteId], [r3].[ServiceTime], [r3].[Type], [r3].[UpdatedAt], [c0].[Id] AS [Id0], [c0].[Address] AS [Address0], [c0].[Code], [c0].[CreatedAt] AS [CreatedAt0], [c0].[Email], [c0].[EstimatedServiceTime], [c0].[IsDeleted] AS [IsDeleted0], [c0].[Latitude] AS [Latitude0], [c0].[Longitude] AS [Longitude0], [c0].[Name] AS [Name0], [c0].[Notes] AS [Notes0], [c0].[Phone], [c0].[Priority], [c0].[Tags], [c0].[TimeWindowEnd], [c0].[TimeWindowStart], [c0].[UpdatedAt] AS [UpdatedAt0], [c0].[WorkspaceId]
          FROM [RouteStops] AS [r3]
          LEFT JOIN [Customers] AS [c0] ON [r3].[CustomerId] = [c0].[Id]
      ) AS [t1] ON [t].[Id4] = [t1].[RouteId]
      ORDER BY [t].[Id], [t].[Id4], [t].[Id0], [t].[Id1], [t].[Id2], [t].[Id3], [t].[Id5], [t].[Id6], [t].[Id7], [t].[Id8], [t].[Id9], [t0].[Id], [t0].[Id0], [t0].[Id1], [j3].[Id], [t1].[Id]
[DEBUG] Journey #1084 - Entity Status: InProgress, Response Status: in_progress, StartedAt: 21.08.2025 03:08:13
info: Monolith.WebAPI.Applications.Behaviors.LoggingBehavior[0]
      Command GetJourneyQuery response handled
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 caught stopping signal...
info: Microsoft.Hosting.Lifetime[0]
      Application is shutting down...
info: Monolith.WebAPI.Hubs.JourneyHub[0]
      User disconnected: kO0l97AGEgEemwkP7t_d5g
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[6]
      OnConnectedAsync ending.
info: Monolith.WebAPI.Hubs.TrackingHub[0]
      User disconnected: 4GOwlOXQOFiriOk47RtbpA
dbug: Microsoft.AspNetCore.SignalR.HubConnectionHandler[6]
      OnConnectedAsync ending.
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 All dispatchers stopped
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 successfully reported itself as stopped in 6,6444 ms
info: Hangfire.Server.BackgroundServerProcess[0]
      Server desktop-c8kjqpf:29404:92a365b8 has been stopped in total 21,8115 ms
